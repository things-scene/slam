(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _traceLayer=require("./trace-layer");Object.defineProperty(exports,"TraceLayer",{enumerable:true,get:function get(){return _interopRequireDefault(_traceLayer).default}});var _mo=require("./mo");Object.defineProperty(exports,"Mo",{enumerable:true,get:function get(){return _interopRequireDefault(_mo).default}});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}},{"./mo":2,"./trace-layer":3}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _scene=scene,Component=_scene.Component,RectPath=_scene.RectPath,Shape=_scene.Shape;var Mo=function(_RectPath){_inherits(Mo,_RectPath);function Mo(){_classCallCheck(this,Mo);return _possibleConstructorReturn(this,(Mo.__proto__||Object.getPrototypeOf(Mo)).apply(this,arguments))}_createClass(Mo,[{key:"_pre_draw",value:function _pre_draw(context){var center=this.center;context.beginPath();var length=this.trace.length;this.trace.forEach(function(location,i){if(i==0)context.moveTo(location.x,location.y);else if(i<length-1)context.lineTo(location.x,location.y)});context.lineTo(center.x+this.delta("tx"),center.y+this.delta("ty"));context.strokeStyle=this.get("strokeStyle");context.stroke();_get(Mo.prototype.__proto__||Object.getPrototypeOf(Mo.prototype),"_pre_draw",this).call(this,context)}},{key:"_draw",value:function _draw(context){var _model=this.model,top=_model.top,left=_model.left,width=_model.width,strokeStyle=_model.strokeStyle;var center=this.center;context.beginPath();context.moveTo(left,top);context.lineTo(left+width,top);context.lineWidth=4;context.strokeStyle="black";context.stroke();context.beginPath();context.moveTo(center.x,center.y);context.lineTo(left,top);context.lineTo(left+width,top);context.lineTo(center.x,center.y)}},{key:"is3dish",value:function is3dish(){return false}},{key:"onchange",value:function onchange(after,before){var bLeft=after.hasOwnProperty("left");var bTop=after.hasOwnProperty("top");var bRotation=after.hasOwnProperty("rotation");if(bLeft||bTop||bRotation){var self=this;if(bLeft)this.dx=after.left-before.left;if(bTop)this.dy=after.top-before.top;if(bLeft||bTop)this.trace.push(this.center);if(bRotation){var to=after.rotation%(Math.PI*2);if(to<-Math.PI)to+=Math.PI*2;if(to>Math.PI)to-=Math.PI*2;var from=(before.rotation||0)%(Math.PI*2);if(from<-Math.PI)from+=Math.PI*2;if(from>Math.PI)from-=Math.PI*2;this.dtheta=to-from;if(this.dtheta>Math.PI)this.dtheta-=Math.PI*2;else if(this.dtheta<-Math.PI)this.dtheta+=Math.PI*2}this.dx&&this.delta("tx",-this.dx);this.dy&&this.delta("ty",-this.dy);this.dtheta&&this.delta("theta",-this.dtheta);this.animate({step:function step(delta){self.dx&&self.delta("tx",-self.dx*(1-delta));self.dy&&self.delta("ty",-self.dy*(1-delta));self.dtheta&&self.delta("theta",-self.dtheta*(1-delta));if(self.hasOwnProperty("dtheta"))self.invalidate();if(delta>=1){delete self.dx;delete self.dy;delete self.dtheta}},delta:"linear"}).start()}}},{key:"hasTextProperty",get:function get(){return false}},{key:"trace",get:function get(){if(!this._trace)this._trace=[];return this._trace}}]);return Mo}(RectPath(Shape));exports.default=Mo;Component.register("mo",Mo)},{}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _scene=scene,Component=_scene.Component,Layer=_scene.Layer;var TraceLayer=function(_Layer){_inherits(TraceLayer,_Layer);function TraceLayer(){_classCallCheck(this,TraceLayer);return _possibleConstructorReturn(this,(TraceLayer.__proto__||Object.getPrototypeOf(TraceLayer)).apply(this,arguments))}_createClass(TraceLayer,[{key:"dispose",value:function dispose(){_get(TraceLayer.prototype.__proto__||Object.getPrototypeOf(TraceLayer.prototype),"dispose",this).call(this);delete this.histories}},{key:"_draw",value:function _draw(context){if(!this.histories)return;context.globalAlpha*=.5;context.lineWidth=1;for(var id in this.histories){var target=this.root.findById(id);if(!target)continue;context.beginPath();this.histories[id].forEach(function(location,i){if(i==0)context.moveTo(location.x,location.y);else context.lineTo(location.x,location.y)});context.strokeStyle=target.get("strokeStyle");context.stroke()}}},{key:"_onchange",value:function _onchange(after,before,hint){if(!after.hasOwnProperty("left")&&!after.hasOwnProperty("top"))return;var id=hint.origin.get("id");if(id===undefined)return;if(!this.histories)this.histories={};this.histories[id]=this.histories[id];var list=this.histories[id];if(!list)list=this.histories[id]=[];var location=hint.origin.center;list.push(location);this.invalidate()}},{key:"eventMap",get:function get(){return{"model-layer":{mo:{change:this._onchange}}}}}]);return TraceLayer}(Layer);exports.default=TraceLayer;Component.register("trace-layer",TraceLayer)},{}]},{},[1]);